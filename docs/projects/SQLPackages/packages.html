<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>1. Using SQL to find the missing packages in the mail delivery service’s database</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../projects/SQLMuseum/mfa.html" rel="next">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Home</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../../projects/SQLMuseum/mfa.html" rel="" target="" aria-current="page">
 <span class="menu-text">Projects</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../projects/SQLPackages/packages.html">SQL Projects</a></li><li class="breadcrumb-item"><a href="../../projects/SQLPackages/packages.html">1. Using SQL to find the missing packages in the mail delivery service’s database</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">SQL Projects</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/SQLPackages/packages.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">1. Using SQL to find the missing packages in the mail delivery service’s database</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/SQLMuseum/mfa.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Soft deletions, views, and triggers in the context of a museum’s database</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">NLP Projects</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/ParseTrees/ParsetreesNnounphrases.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Generating parse trees and extracting noun phrases</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">ML Projects</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/MNIST/mnist.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Nearest neighbor classifier for handwritten digit recognition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/NimGame/NimGame.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Training an AI to play a game using reinforcement learning</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#missing-package-problem-scenario" id="toc-missing-package-problem-scenario" class="nav-link active" data-scroll-target="#missing-package-problem-scenario"><span class="header-section-number">1</span> Missing Package Problem Scenario</a>
  <ul class="collapse">
  <li><a href="#problem-1-the-missing-letter" id="toc-problem-1-the-missing-letter" class="nav-link" data-scroll-target="#problem-1-the-missing-letter"><span class="header-section-number">1.1</span> Problem 1: The Missing Letter</a></li>
  <li><a href="#problem-2-the-devious-delivery" id="toc-problem-2-the-devious-delivery" class="nav-link" data-scroll-target="#problem-2-the-devious-delivery"><span class="header-section-number">1.2</span> Problem 2: The Devious Delivery</a></li>
  <li><a href="#problem-3-the-forgotten-gift" id="toc-problem-3-the-forgotten-gift" class="nav-link" data-scroll-target="#problem-3-the-forgotten-gift"><span class="header-section-number">1.3</span> Problem 3: The Forgotten Gift</a></li>
  </ul></li>
  <li><a href="#schema" id="toc-schema" class="nav-link" data-scroll-target="#schema"><span class="header-section-number">2</span> Schema</a></li>
  <li><a href="#solution-to-problem-1-the-missing-letter" id="toc-solution-to-problem-1-the-missing-letter" class="nav-link" data-scroll-target="#solution-to-problem-1-the-missing-letter"><span class="header-section-number">3</span> Solution to Problem 1: The Missing Letter</a></li>
  <li><a href="#solution-to-problem-2-the-devious-delivery" id="toc-solution-to-problem-2-the-devious-delivery" class="nav-link" data-scroll-target="#solution-to-problem-2-the-devious-delivery"><span class="header-section-number">4</span> Solution to Problem 2: The Devious Delivery</a></li>
  <li><a href="#solution-to-problem-3-the-forgotten-gift" id="toc-solution-to-problem-3-the-forgotten-gift" class="nav-link" data-scroll-target="#solution-to-problem-3-the-forgotten-gift"><span class="header-section-number">5</span> Solution to Problem 3: The Forgotten Gift</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">1. Using SQL to find the missing packages in the mail delivery service’s database</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="missing-package-problem-scenario" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Missing Package Problem Scenario</h1>
<p>Imagine you are a <code>mail clerk</code> for the city of Boston who oversees the delivery of mail across the city. For the most part, all packages sent are eventually delivered. However, every once in while, a mystery lands on your desk: a missing package! For each customer that comes to you with a report of a missing package, your task is to help each customer find their missing package and answer their relevant questions using just the information in the mail delivery service’s database, <code>packages.db</code>, which contains data on the transit of packages around the city.</p>
<p>The specific problems to solve and the schema of the database are described below.</p>
<section id="problem-1-the-missing-letter" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="problem-1-the-missing-letter"><span class="header-section-number">1.1</span> Problem 1: The Missing Letter</h2>
<p>The first report of a missing package comes from Anneke. Anneke walks up to your counter and tells you the following:</p>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Clerk, my name’s Anneke. I live over at 900 Somerville Avenue. Not long ago, I sent out a special letter. It’s meant for my friend Varsha. She’s starting a new chapter of her life at 2 Finnegan Street, uptown. (That address, let me tell you: it was a bit tricky to get right the first time.) The letter is a congratulatory note—a cheery little paper hug from me to her, to celebrate this big move of hers. Can you check if it’s made its way to her yet?</p>
</div>
</div>
</div>
<p>Your job is to find out:</p>
<ol type="1">
<li><p>At what type of address did the Lost Letter end up?</p></li>
<li><p>At what address did the Lost Letter end up?</p></li>
</ol>
</section>
<section id="problem-2-the-devious-delivery" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="problem-2-the-devious-delivery"><span class="header-section-number">1.2</span> Problem 2: The Devious Delivery</h2>
<p>The second report of a missing package comes from a mysterious fellow from out of town. They walk up to your counter and tell you the following:</p>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Good day to you, deliverer of the mail. You might remember that not too long ago I made my way over from the town of Fiftyville. I gave a certain box into your reliable hands and asked you to keep things low. My associate has been expecting the package for a while now. And yet, it appears to have grown wings and flown away. Ha! Any chance you could help clarify this mystery? Afraid there’s no “From” address. It’s the kind of parcel that would add a bit more… quack to someone’s bath times, if you catch my drift.</p>
</div>
</div>
</div>
<p>Your job is to find out:</p>
<ol type="1">
<li>At what type of address did the Devious Delivery end up?</li>
<li>What were the contents of the Devious Delivery?</li>
</ol>
</section>
<section id="problem-3-the-forgotten-gift" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="problem-3-the-forgotten-gift"><span class="header-section-number">1.3</span> Problem 3: The Forgotten Gift</h2>
<p>The third report of a missing package comes from a grandparent who lives down the street from the post office. They approach your counter and tell you the following:</p>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Oh, excuse me, Clerk. I had sent a mystery gift, you see, to my wonderful granddaughter, off at 728 Maple Place. That was about two weeks ago. Now the delivery date has passed by seven whole days and I hear she still waits, her hands empty and heart filled with anticipation. I’m a bit worried wondering where my package has gone. I cannot for the life of me remember what’s inside, but I do know it’s filled to the brim with my love for her. Can we possibly track it down so it can fill her day with joy? I did send it from my home at 109 Tileston Street.</p>
</div>
</div>
</div>
<p>Your job is to find out:</p>
<ol type="1">
<li>What are the contents of the Forgotten Gift?</li>
<li>Who has the Forgotten Gift?</li>
</ol>
</section>
</section>
<section id="schema" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Schema</h1>
<p><code>packages.db</code> represents all recent package deliveries in the city of Boston with the help of following entities:</p>
<ul>
<li>Drivers, who are the people that deliver packages</li>
<li>The packages themselves</li>
<li>Addresses, such as 1234 Main Street</li>
<li>Scans of packages, which represent confirmations a delivery driver picked up or dropped off a given package</li>
</ul>
<p>These entities are related per the entity relationship (ER) diagram below:</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="ERpackages.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">ER diagram of the packages database</figcaption>
</figure>
</div>
<p>Let us now establish the SQLite connection to the database using DBI package and also list the tables in the database.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(), <span class="st">"packages.db"</span>) <span class="co"># establish SQLite connection to the database</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListTables</span>(con) <span class="co">#list the tables in the database</span></span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "addresses" "drivers"   "packages"  "scans"    </code></pre>
</div>
</div>
<p>Click the tabsets below to learn more about the schema of each individual table in the <code>packages.db</code>.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true"><code>addresses</code> table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false"><code>drivers</code> table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false"><code>packages</code> table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false"><code>scans</code> table</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>The <code>addresses</code> table contains the following columns:</p>
<ul>
<li><code>id</code>, which is the ID of the address</li>
<li><code>address</code>, which is the street address itself (i.e., 7660 Sharon Street)</li>
<li><code>type</code>, which is the type of address (i.e., residential, commercial, etc.)</li>
</ul>
<p>The sample data of the <code>addresses</code> table can be seen below.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> <span class="ot">"addresses"</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">5</span>;</span></code></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>5 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">id</th>
<th style="text-align: left;">address</th>
<th style="text-align: left;">type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">7660 Sharon Street</td>
<td style="text-align: left;">Residential</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">60 Drake Place</td>
<td style="text-align: left;">Residential</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">88 City Point Court</td>
<td style="text-align: left;">Residential</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">266 Dorchester Avenue</td>
<td style="text-align: left;">Residential</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">2 Otis Place</td>
<td style="text-align: left;">Residential</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>The <code>drivers</code> table contains the following columns:</p>
<ul>
<li><code>id</code>, which is the ID of the driver</li>
<li><code>name</code>, which is the first name of the driver</li>
</ul>
<p>The sample data of the <code>drivers</code> table can be seen below.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> <span class="ot">"drivers"</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">5</span>;</span></code></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>5 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">id</th>
<th style="text-align: left;">name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">Matthew</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">Isabel</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">Julianna</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">Varsha</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">Jacob</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>The <code>packages</code> table contains the following columns:</p>
<ul>
<li><code>id</code>, which is the ID of the package</li>
<li><code>contents</code>, which contains the contents of the package</li>
<li><code>from_address_id</code>, which is the ID of the address from which the package was sent</li>
<li><code>to_address_id</code>, which is the ID of the address to which the package was sent. It’s not necessarily where it ended up!</li>
</ul>
<p>The sample data of the <code>packages</code> table can be seen below.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> <span class="ot">"packages"</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">5</span>;</span></code></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>5 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">id</th>
<th style="text-align: left;">contents</th>
<th style="text-align: right;">from_address_id</th>
<th style="text-align: right;">to_address_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">Sticky notes</td>
<td style="text-align: right;">8575</td>
<td style="text-align: right;">4635</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">Shears</td>
<td style="text-align: right;">8431</td>
<td style="text-align: right;">7641</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">Index cards</td>
<td style="text-align: right;">2107</td>
<td style="text-align: right;">3624</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">Glue stick</td>
<td style="text-align: right;">6954</td>
<td style="text-align: right;">3740</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">Trading cards</td>
<td style="text-align: right;">4530</td>
<td style="text-align: right;">5564</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<p>The scans table contains the following columns:</p>
<ul>
<li><code>id</code>, which is the ID of the scan</li>
<li><code>driver_id</code>, which is the ID of the driver who created the scan</li>
<li><code>package_id</code>, which is the ID of the package scanned</li>
<li><code>address_id</code>, which is the ID of the address where the package was scanned</li>
<li><code>action</code>, which indicates whether the package was picked up (“Pick”) or dropped off (“Drop”)</li>
<li><code>timestamp</code>, which is the day and time at which the package was scanned</li>
</ul>
<p>The sample data of the <code>scans</code> table can be seen below.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> <span class="ot">"scans"</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">5</span>;</span></code></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>5 records</caption>
<colgroup>
<col style="width: 4%">
<col style="width: 14%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 10%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">id</th>
<th style="text-align: right;">driver_id</th>
<th style="text-align: right;">package_id</th>
<th style="text-align: right;">address_id</th>
<th style="text-align: left;">action</th>
<th style="text-align: left;">timestamp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">8502</td>
<td style="text-align: right;">1063</td>
<td style="text-align: left;">Pick</td>
<td style="text-align: left;">2023-07-11 15:16:05.340221</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">3320</td>
<td style="text-align: right;">9551</td>
<td style="text-align: left;">Pick</td>
<td style="text-align: left;">2023-07-11 15:19:39.359315</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2879</td>
<td style="text-align: right;">9589</td>
<td style="text-align: left;">Pick</td>
<td style="text-align: left;">2023-07-11 15:23:47.208594</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">2240</td>
<td style="text-align: right;">3464</td>
<td style="text-align: left;">Pick</td>
<td style="text-align: left;">2023-07-11 15:28:16.920400</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">8664</td>
<td style="text-align: right;">8013</td>
<td style="text-align: left;">Pick</td>
<td style="text-align: left;">2023-07-11 15:32:42.265139</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="solution-to-problem-1-the-missing-letter" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Solution to Problem 1: The Missing Letter</h1>
<p>From the problem statement, it is clear that we know the from address, i.e., 900 Somerville Avenue, and the package is some kind of letter. However, we do not know the to address.</p>
<p>To answer the above two questions, we need to query the packages table to find the <code>id</code> of the packages using the from address, i.e., ‘900 Somerville Avenue’ and filtering for entries that contain the word ‘letter’ in the ‘contents’ column. Once we know the <code>package_id</code>, we can find the <code>address_id</code>, since the package was delivered somewhere, by setting the ‘action’ column to ‘Drop’ by querying the ‘scans’ table. Finally, we can then determine the <code>type</code> of address and the <code>address</code> where the letter ended up by querying the ‘addresses’ table using the obtained ‘address_id’.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="ot">"type"</span>, <span class="ot">"address"</span> <span class="kw">FROM</span> <span class="ot">"addresses"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="ot">"id"</span> <span class="kw">IN</span> (</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span> <span class="ot">"address_id"</span> <span class="kw">FROM</span> <span class="ot">"scans"</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">WHERE</span> <span class="ot">"package_id"</span> <span class="op">=</span> (</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">SELECT</span> <span class="ot">"id"</span> <span class="kw">FROM</span> <span class="ot">"packages"</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">WHERE</span> <span class="ot">"from_address_id"</span> <span class="op">=</span> </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        (<span class="kw">SELECT</span> <span class="ot">"id"</span> <span class="kw">FROM</span> <span class="ot">"addresses"</span> <span class="kw">WHERE</span> <span class="ot">"address"</span> <span class="op">=</span> <span class="st">'900 Somerville Avenue'</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">AND</span> </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>        <span class="ot">"contents"</span> <span class="kw">LIKE</span> <span class="st">'%letter%'</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        ) </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">AND</span> <span class="ot">"action"</span> <span class="op">=</span> <span class="st">'Drop'</span> </span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">type</th>
<th style="text-align: left;">address</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Residential</td>
<td style="text-align: left;">2 Finnigan Street</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>So, the answers to the questions are as follows:</p>
<ol type="1">
<li>At what type of address did the Lost Letter end up?
<ul>
<li><code>Residential</code><br>
</li>
</ul></li>
<li>At what address did the Lost Letter end up?
<ul>
<li><code>2 Finnigan Street</code></li>
</ul></li>
</ol>
</section>
<section id="solution-to-problem-2-the-devious-delivery" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Solution to Problem 2: The Devious Delivery</h1>
<p>Here, all we know is that the from address is not provided, and the package was delivered somewhere.</p>
<p>To answer the first question, we need to query the ‘scans’ table to find the <code>address_id</code> using the ‘package_id’ where the from address is NULL and set the ‘action’ column to ‘Drop’ as the package was delivered. After obtaining the <code>address_id</code>, we can use it to find the the <code>type</code> of address where the package ended up by querying the ‘addresses’ table.</p>
<p>For the second question, i.e., to know the <code>contents</code> of the package, we just need to query the ‘packages’ table where the from address is NULL.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="ot">"type"</span> <span class="kw">FROM</span> <span class="ot">"addresses"</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="ot">"id"</span> <span class="op">=</span> (</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span> <span class="ot">"address_id"</span> <span class="kw">FROM</span> <span class="ot">"scans"</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">WHERE</span> <span class="ot">"package_id"</span> <span class="kw">IN</span> (</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">SELECT</span> <span class="ot">"id"</span> <span class="kw">FROM</span> <span class="ot">"packages"</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">WHERE</span> <span class="ot">"from_address_id"</span> <span class="kw">IS</span> <span class="kw">NULL</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">AND</span> <span class="ot">"action"</span> <span class="op">=</span> <span class="st">'Drop'</span> </span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Police Station</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="ot">"contents"</span> <span class="kw">FROM</span> <span class="ot">"packages"</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="ot">"from_address_id"</span> <span class="kw">IS</span> <span class="kw">NULL</span>;</span></code></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">contents</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Duck debugger</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>So, the answers to the questions are as follows:</p>
<ol type="1">
<li>At what type of address did the Devious Delivery end up?
<ul>
<li><code>Police Station</code></li>
</ul></li>
<li>What were the contents of the Devious Delivery?
<ul>
<li><code>Duck debugger</code></li>
</ul></li>
</ol>
</section>
<section id="solution-to-problem-3-the-forgotten-gift" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Solution to Problem 3: The Forgotten Gift</h1>
<p>In this problem, we know the from address, i.e., 109 Tileston Street, and the to address, i.e., 728 Maple Place, but we do not know the contents of the package. The additional crucial information that we know is the package is yet to be delivered. This implies that the package is still with the driver.</p>
<p>To solve the first question, we need to query the ‘packages’ table where the from address is ‘109 Tileston Street’ and the to address is ‘728 Maple Place’.</p>
<p>For the second question, all we need to know is the name of that driver since the package is still with the driver. For this, we need to query the ‘scans’ table to get the driver_id of that single driver involved. In doing so, we need to make sure that we get only one ‘driver_id’ by conditioning the query on columns that we know so far, i.e., ‘package_id’, which can be found using the from address and the to address, ‘address_id’, which cannot be the from address, and the ‘action’ is ‘Pick’. Once we know the ‘driver_id’, we can find the name of the driver using that.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="ot">"contents"</span> <span class="kw">FROM</span> <span class="ot">"packages"</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="ot">"from_address_id"</span> <span class="op">=</span> (</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span> <span class="ot">"id"</span> <span class="kw">FROM</span> <span class="ot">"addresses"</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">WHERE</span> <span class="ot">"address"</span> <span class="op">=</span> <span class="st">'109 Tileston Street'</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="kw">AND</span> <span class="ot">"to_address_id"</span> <span class="op">=</span> (</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span> <span class="ot">"id"</span> <span class="kw">FROM</span> <span class="ot">"addresses"</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">WHERE</span> <span class="ot">"address"</span> <span class="op">=</span> <span class="st">'728 Maple Place'</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">contents</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Flowers</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="ot">"name"</span> <span class="kw">FROM</span> <span class="ot">"drivers"</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="ot">"id"</span> <span class="kw">IN</span> (</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span> <span class="ot">"driver_id"</span> <span class="kw">FROM</span> <span class="ot">"scans"</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">WHERE</span> <span class="ot">"package_id"</span> <span class="op">=</span> (</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">SELECT</span> <span class="ot">"id"</span> <span class="kw">FROM</span> <span class="ot">"packages"</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">WHERE</span> <span class="ot">"to_address_id"</span> <span class="op">=</span> (</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>            <span class="kw">SELECT</span> <span class="ot">"id"</span> <span class="kw">FROM</span> <span class="ot">"addresses"</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>            <span class="kw">WHERE</span> <span class="ot">"address"</span> <span class="op">=</span> <span class="st">'728 Maple Place'</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">AND</span> <span class="ot">"from_address_id"</span> <span class="op">=</span> (</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>            <span class="kw">SELECT</span> <span class="ot">"id"</span> <span class="kw">FROM</span> <span class="ot">"addresses"</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>            <span class="kw">WHERE</span> <span class="ot">"address"</span> <span class="op">=</span> <span class="st">'109 Tileston Street'</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">AND</span> <span class="ot">"address_id"</span> <span class="op">!=</span> (</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>        <span class="kw">SELECT</span> <span class="ot">"id"</span> <span class="kw">FROM</span> <span class="ot">"addresses"</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>        <span class="kw">WHERE</span> <span class="ot">"address"</span> <span class="op">=</span> <span class="st">'109 Tileston Street'</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">AND</span> <span class="ot">"action"</span> <span class="op">=</span> <span class="ot">"Pick"</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
</details>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Mikel</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>So, the answers to the questions are as follows:</p>
<ol type="1">
<li>What are the contents of the Forgotten Gift?
<ul>
<li><code>Flowers</code></li>
</ul></li>
<li>Who has the Forgotten Gift?
<ul>
<li><code>Mikel</code></li>
</ul></li>
</ol>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../projects/SQLMuseum/mfa.html" class="pagination-link">
        <span class="nav-page-text">2. Soft deletions, views, and triggers in the context of a museum’s database</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>